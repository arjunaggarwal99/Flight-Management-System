I have to admit that this design has been modified many times during the time I am trying to code it up. At the very beginning, I actually convince myself that I need to separate the flights table into one-hop and noStop tables. Here I am going to illustrate what I find when I try to code the whole thing up. 

I only create two tables in the database, the first one is Users for sure. Since I cannot store users' information inside local because every-time it will be refreshed if the program is reopened. And the other table I created is Reservations table. It can be demonstrate as a table with three different functions. First, it stores booking informations as the main part. Second, each line of the booking informations have is-paid attribute in order to determine whether the book is paid or not. Third, each line of the booking information have isCancelled attribute in order to determine whether the book is cancelled or not. Also the reservation has a unique reservation id for each reservation. However, in the database, it may take two lines' space because the primary key is composited by reservation id and flight number. Each line represents a single flight and sometimes it need to store one-hop flight. The whole idea is based on the fact that I am not going back to flight table to search more information. For some of the information that I cannot store in the database because I should only store the latest search. It is actually fast in my experience because I do not need to join flight table anymore. The cost is to store more information in the reservations table, but it is reasonable tp store some information for relatively small amount of users. Inside the booking function, I store the search history locally include flight number and everything, meaning I do not need to search or get any information from the dababase, but I do have to look for the reservations id in the database in case of dirty read. I believe my booking function is best designed, even with the potential cost a user will never get a response, but it is just in process. I applied recursion in order to give users a second try in order to book information online while other users want to access to the database at the same time. I handle the error when a users cannot book two flights at the same day, but they are allowed to book two flights in a one-hop flight by simply cheching whether they are under the same reseravtion id. Search method read information from the search table in the database, and pay function is people are paying only for themselves, meaning they are not allowed to pay for anyone else.

I have the conclusion part because this design is a bit hard to understand, but I have only two tables: user and reservations. Reservations serves for the function: ispaid, iscancelled and store booking information. Search History will be reserved locally. 